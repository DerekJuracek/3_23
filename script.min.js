// @ts-nocheck
mapboxgl.accessToken="pk.eyJ1IjoiY2l2aWNuZWJyYXNrYSIsImEiOiJjbGRkaXdnMWowNDBvM3FwNWcybnE2NXhmIn0.KAyFk0TA3OaiUOFCnjXXNA";let beforeMap,afterMap,compare,beforeMapValue=null,afterMapValue=null,swipeOn=!1;const map=new mapboxgl.Map({container:"map",style:"mapbox://styles/civicnebraska/cm8eq6bp600xt01s5eru42ebf",center:[-99.60554664374831,41.478777848167454],zoom:5.9,customAttribution:"Civic Nebraska"});function ClearSelection(){beforeMapValue=null,afterMapValue=null,$("#beforeMapDropdown").val("").text("")}document.getElementById("splash-close").addEventListener("click",(function(){document.getElementById("splash-screen").style.display="none",$("#swiper").removeAttr("disabled");const e=document.getElementById("navbarDropdownMenuLink");e.classList.remove("disabled"),e.removeAttribute("tabindex");document.getElementById("voter-legend-2024").style.display="block";var o=document.querySelector(".mapboxgl-ctrl-geocoder input");o.removeAttribute("disabled"),o.classList.remove("disabled")})),map.on("load",(function(){var e=window.innerWidth<600?4.7:5.9;map.flyTo({center:[-99.60554664374831,41.478777848167454],zoom:e,speed:.5,curve:1})}));const nav=new mapboxgl.NavigationControl({visualizePitch:!0});map.addControl(nav,"bottom-left");var geocoder=new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl:mapboxgl,bbox:[-104.053514,39.999975,-95.30829,43.001707]});document.getElementById("geocoder").appendChild(geocoder.onAdd(map));var geocoderInput=document.querySelector(".mapboxgl-ctrl-geocoder input");geocoderInput.setAttribute("disabled","disabled"),geocoderInput.classList.add("disabled");let popup=new mapboxgl.Popup({offset:[0,-7],closeButton:!0,closeOnClick:!0,maxWidth:"none",anchor:"center"});var beforeMapSelected=!1,afterMapSelected=!1;function checkCompareButton(){beforeMapSelected&&afterMapSelected?$("#closeModal").removeAttr("disabled").removeAttr("readonly").attr("title","Start Comparison").css("cursor","pointer"):$("#closeModal").attr("disabled","disabled").attr("readonly","true").attr("title","Before Map and After Map Selection Required!!!").css("cursor","not-allowed")}$("body").on("click","#beforeMapDropdown + .dropdown-menu .dropdown-item",(function(e){e.preventDefault();const o=$(this).text();beforeMapValue=$(this).data("value"),beforeMapSelected=beforeMapValue.length>0,checkCompareButton();const n=$("#beforeMapDropdown");n.text(o),n.attr("title",o)})),$("body").on("click","#afterMapDropdown + .dropdown-menu .dropdown-item",(function(e){e.preventDefault();const o=$(this).text();afterMapValue=$(this).data("value"),afterMapSelected=afterMapValue.length>0,checkCompareButton();const n=$("#afterMapDropdown");n.text(o),n.attr("title",o)})),$(document).ready((function(){$("#modalContainer").load("modal.html",(function(){$(".modal-dialog-draggable").draggable({handle:".modal-header"})}))})),$(document).ready((function(){$("body").on("click",".close",(function(){$("#swiper").removeClass("disabled")}))}));const swipe=document.getElementById("swiper");function disableDropdown(){$("#navbarDropdownMenuLink").off("click.dropdown"),$("#navbarDropdownMenuLink").on("click",(function(e){e.preventDefault(),e.stopPropagation()}))}function enableDropdown(){$("#navbarDropdownMenuLink").off("click"),$("#navbarDropdownMenuLink").dropdown()}swipe.addEventListener("click",(function(e){$("#swipeModal").modal({backdrop:"static",keyboard:!1}),$("#swiper").addClass("disabled")})),$(document).ready((function(){$("body").on("click","#closeModal",(function(){disableDropdown(),$("#comparison-container").show(),$("#closeSwiper").show(),$("#map").hide();document.querySelectorAll("#legend-master > div").forEach((e=>e.style.display="none"));let e=beforeMapValue?`mapbox://styles/civicnebraska/${beforeMapValue}`:"mapbox://styles/mapbox/light-v11",o=afterMapValue?`mapbox://styles/civicnebraska/${afterMapValue}`:"mapbox://styles/mapbox/light-v11";beforeMap=new mapboxgl.Map({container:"before",style:e,center:map.getCenter(),zoom:map.getZoom()}),afterMap=new mapboxgl.Map({container:"after",style:o,center:map.getCenter(),zoom:map.getZoom()});compare=new mapboxgl.Compare(beforeMap,afterMap,"#comparison-container"),showCompareLegends(beforeMapValue,afterMapValue),$("body").on("click","#closeSwiper",(function(){compare.remove(),$("#closeSwiper").hide(),$("#swiper").removeClass("disabled"),$("#comparison-container").hide(),$("#map").show(),map.resize(),enableDropdown();const e=document.querySelector("#menu input:checked");e&&updateLegend(e.id)}))}))}));const legendMap={clexfr7cx000h01mzika7ykfc:"voter-legend",cm8eoeypk001v01s0hkjr1kbe:"voter-legend-2020",cm8eq6bp600xt01s5eru42ebf:"voter-legend-2024",clexfyjaa000101rumyqaonzb:"voter-legendZC",cm8emm223001801s0aza732ul:"voter-legendZC-2020",cm8engaau006r01rygv0w2dwp:"voter-legendZC-2024",clexg301o001e01tjbvu4n3v6:"voter-legendC",cm8enoa9u00hs01s5ghebe02j:"voter-legendC-2020",cm8enyly2006y01ry8hf38vcb:"voter-legendC-2024",cm8erptki00yb01s5d6dk9f5t:"voter-legend-VD-CT",cm8er28fc007x01ry7uxebczh:"voter-legend-VD-ZC",cm8es0xzb003201s02l27cc6d:"voter-legend-VD-C",clewoj4kq000501nzxujmb2ua:"income-legend",clewnf117001a01pfv1micysu:"belowP-legend",clevcmuzx00a101mgh3v8k4tv:"aboveP-legend",cm8f2aaw700a501ry5tafeg40:"hs-legend",cm8f246u000l701s59w596l5c:"bachelors-legend",clewnra2m000701lnes3cxf9s:"disability-legend",clewo1pjf000101o3e3dom768:"plus60-legend",clewodoxw000401pjsyljoonj:"children-legend",clexfewjc001801pbydx9y2ha:"white-legend",clexf4tei000301pogtuiyqr4:"hl-legend",clexf9z8d003v01trzgu99jha:"asian-legend",clexfleuq003b01pgk110zhg6:"black-legend",clexec5sf001901msxnv4lg37:"indian-legend"};function showCompareLegends(e,o){const n=legendMap[e]||"voter-legend",r=legendMap[o]||"voter-legend",t=document.getElementById(n),s=document.getElementById(r);t&&(t.style.display="block",t.classList.add("before-legend")),s&&(s.style.display="block",s.classList.add("after-legend"))}function updateLegend(e){["voter-legend","voter-legend-2020","voter-legend-2024","voter-legendZC","voter-legendZC-2020","voter-legendZC-2024","voter-legendC","voter-legendC-2020","voter-legendC-2024","voter-legend-VD-CT","voter-legend-VD-ZC","voter-legend-VD-C","income-legend","belowP-legend","aboveP-legend","hs-legend","bachelors-legend","disability-legend","plus60-legend","children-legend","white-legend","hl-legend","asian-legend","black-legend","indian-legend"].forEach((o=>{const n=document.getElementById(o);n.style.display=o===legendMap[e]?"block":"none",n.classList.remove("before-legend","after-legend")}))}const layerList=document.getElementById("menu"),inputs=layerList.getElementsByTagName("input");for(const e of inputs)e.onclick=e=>{const o=e.target.id;map.setStyle("mapbox://styles/civicnebraska/"+o),updateLegend(o)};map.on("click",(e=>{const o=map.getStyle().name;if(-1==o.indexOf("zip_code")&&-1==o.indexOf("counties")&&-1==o.indexOf("difference")&&-1==o.indexOf("Demo")){const o=map.queryRenderedFeatures(e.point,{})[0].properties,s=o.NAMELSAD,a=o.Voter_Turn,l=o.Median_Inc,d=o.Over_60,g=o.pct_hs_deg?o.pct_hs_deg:o.pct_hs_or_,c=o.pct_bach_d?o.pct_bach_d:o.pct_bach_o,i=o.Household_,p=o.Child_Unde,b=o.Above_Pov,u=o.Below_Pov,m=o.Black_Alon,h=o.Asian_Alon,y=o.Am_Indian,f=o.White_Alon,v=o.Hispanic_L;var n=e.lngLat.lat,r=e.lngLat.lng;(t=[]).push(r,n),void 0===s?popup.setLngLat(t).setHTML('<h6><strong>No Data</strong></h6><hr style="height:2px;border-width:0;color:gray;background-color:gray"><p><strong>Voter Turnout: </strong>No Data<br><strong>Median Income: </strong>No Data</nobr><br>\n        <nobr><strong>Above Poverty: </strong>No Data</nobr><br><nobr><strong>Below Poverty: </strong>No Data</nobr><br><nobr><strong>Homes w/ at least one 60 year old: </strong>No Data<br>\n                <nobr><strong>Possessing a HS Diploma: </strong>No Data <br> <nobr><strong>Possessing a Bachelors Degree: </strong>No Data <br>\n       <nobr><strong>Homes w/ at least one child under 18 years old: </strong>No Data<br>\n        <nobr><strong>Homes w/ at least one person w/ Disability: </strong>No Data<nobr><br><strong>Asian Householders: </strong>No Data<nobr><br><strong>Black Householders: </strong>No Data<br><nobr><strong>American Indian Householders: </strong>No Data\n        </nobr><br><nobr><strong>White Householders: </strong>No Data</nobr><br><nobr><strong>Hispanic/Latino Householders: </strong>No Data').addTo(map):popup.setLngLat(t).setHTML(`<h6><strong>${s}</strong></h6><hr style="height:2px;border-width:0;color:gray;background-color:gray"><p><strong>Voter Turnout: </strong>${a}%<br><strong>Median Income: </strong>$${l}</nobr><br>\n        <nobr><strong>Above Poverty: </strong>${b}% </nobr><br><nobr><strong>Below Poverty: </strong>${u}% </nobr><br><nobr><strong>Homes w/ at least one 60 year old: </strong>${d}%<br>\n        <nobr><strong>Possessing a HS Diploma: </strong>${g}% <br> <nobr><strong>Possessing a Bachelors Degree: </strong>${c}% <br>\n       <nobr><strong>Homes w/ at least one child under 18 years old: </strong>${p}% <br>\n        <nobr><strong>Homes w/ at least one person w/ Disability: </strong>${i}%<nobr><br><strong>Asian Householders: </strong>${h}%<nobr><br><strong>Black Householders: </strong>${m}%<br><nobr><strong>American Indian Householders: </strong>${y}%\n        </nobr><br><nobr><strong>White Householders: </strong>${f}%</nobr><br><nobr><strong>Hispanic/Latino Householders: </strong>${v}%`).addTo(map)}else if(o.indexOf("Demo")>-1){const o=map.queryRenderedFeatures(e.point,{})[0].properties,s=o.NAMELSAD,a=o.Median_Inc,l=o.Over_60,d=o.pct_hs_deg?o.pct_hs_deg:o.pct_hs_or_,g=o.pct_bach_d?o.pct_bach_d:o.pct_bach_o,c=o.Household_,i=o.Child_Unde,p=o.Above_Pov,b=o.Below_Pov,u=o.Black_Alon,m=o.Asian_Alon,h=o.Am_Indian,y=o.White_Alon,f=o.Hispanic_L;n=e.lngLat.lat,r=e.lngLat.lng;(t=[]).push(r,n),popup.setLngLat(t).setHTML(`<h6><strong>${s}</strong></h6><hr style="height:2px;border-width:0;color:gray;background-color:gray"><p><strong>Median Income: </strong>$${a}</nobr><br>\n    <nobr><strong>Above Poverty: </strong>${p}% </nobr><br><nobr><strong>Below Poverty: </strong>${b}% </nobr><br><nobr><strong>Homes w/ at least one 60 year old: </strong>${l}%<br>\n    <nobr><strong>Possessing a HS Diploma: </strong>${d}% <br> <nobr><strong>Possessing a Bachelors Degree: </strong>${g}% <br>\n   <nobr><strong>Homes w/ at least one child under 18 years old: </strong>${i}% <br>\n    <nobr><strong>Homes w/ at least one person w/ Disability: </strong>${c}%<nobr><br><strong>Asian Householders: </strong>${m}%<nobr><br><strong>Black Householders: </strong>${u}%<br><nobr><strong>American Indian Householders: </strong>${h}%\n    </nobr><br><nobr><strong>White Householders: </strong>${y}%</nobr><br><nobr><strong>Hispanic/Latino Householders: </strong>${f}%`).addTo(map)}else if(o.indexOf("zip_code")>-1&&-1==o.indexOf("difference")){const o=map.queryRenderedFeatures(e.point,{})[0].properties,s=o.NAME,a=o.City,l=o.VoterTurn;n=e.lngLat.lat,r=e.lngLat.lng;(t=[]).push(r,n),popup.setLngLat(t).setHTML(`<h6><strong>Zip-Code: ${s}</strong></h6><hr style="height:2px;border-width:0;color:gray;background-color:gray"><p><strong>Voter Turnout: </strong>${l}%\n        </p><strong>City: </strong>${a}</nobr>`).addTo(map)}else if(o.indexOf("difference")>-1)if(o.indexOf("county")>-1){const o=map.queryRenderedFeatures(e.point,{})[0].properties,s=o.NAMELSAD,a=o.difference,l=o.Voter_Turn,d=o.VoterTurn;n=e.lngLat.lat,r=e.lngLat.lng;(t=[]).push(r,n),popup.setLngLat(t).setHTML(`<h6><strong>County: ${s}</strong></h6><hr style="height:2px;border-width:0;color:gray;background-color:gray">\n              <nobr><strong>Voter Turnout 2020: </strong>${l}% <br>\n              <nobr><strong>Voter Turnout 2024: </strong>${d}% <br>\n              <strong>Voter Turnout Difference 2020 - 2024: </strong>${a}%\n            </p>`).addTo(map)}else if(o.indexOf("zip_code")>-1){const o=map.queryRenderedFeatures(e.point,{})[0].properties,s=o.NAME,a=o.City,l=o.difference,d=o.Voter_Turn,g=o.VoterTurn;n=e.lngLat.lat,r=e.lngLat.lng;(t=[]).push(r,n),popup.setLngLat(t).setHTML(`<h6><strong>Zip-Code: ${s}</strong></h6><hr style="height:2px;border-width:0;color:gray;background-color:gray"><p>\n          </p><strong>City: </strong>${a}</nobr> <br>\n          <nobr><strong>Voter Turnout 2020: </strong>${d}% <br>\n          <nobr><strong>Voter Turnout 2024: </strong>${g}% <br>\n          <strong>Voter Turnout Difference 2020 - 2024: </strong>${l}%\n        `).addTo(map)}else{const o=map.queryRenderedFeatures(e.point,{})[0].properties,s=o.NAMELSAD,a=o.Voter_Turn,l=o.Voter_Tu_1,d=o.difference,g=o.Median_Inc,c=o.Over_60,i=o.pct_hs_deg?o.pct_hs_deg:o.pct_hs_or_,p=o.pct_bach_d?o.pct_bach_d:o.pct_bach_o,b=o.Household_,u=o.Child_Unde,m=o.Above_Pov,h=o.Below_Pov,y=o.Black_Alon,f=o.Asian_Alon,v=o.Am_Indian,$=o.White_Alon,w=o.Hispanic_L;n=e.lngLat.lat,r=e.lngLat.lng;(t=[]).push(r,n),popup.setLngLat(t).setHTML(`<h6><strong>${s}</strong></h6><hr style="height:2px;border-width:0;color:gray;background-color:gray"><p>\n          <strong>Voter Turnout 2020: </strong>${l}%<br>\n          <strong>Voter Turnout 2024: </strong>${a}%<br>\n          <strong>Voter Turnout Difference 2020 - 2024: </strong>${d}%<br>\n          <strong>Median Income: </strong>$${g}</nobr><br>\n        <nobr><strong>Above Poverty: </strong>${m}% </nobr><br><nobr><strong>Below Poverty: </strong>${h}% </nobr><br><nobr><strong>Homes w/ at least one 60 year old: </strong>${c}%<br>\n        <nobr><strong>Possessing a HS Diploma: </strong>${i}% <br> <nobr><strong>Possessing a Bachelors Degree: </strong>${p}% <br>\n       <nobr><strong>Homes w/ at least one child under 18 years old: </strong>${u}% <br>\n        <nobr><strong>Homes w/ at least one person w/ Disability: </strong>${b}%<nobr><br><strong>Asian Householders: </strong>${f}%<nobr><br><strong>Black Householders: </strong>${y}%<br><nobr><strong>American Indian Householders: </strong>${v}%\n        </nobr><br><nobr><strong>White Householders: </strong>${$}%</nobr><br><nobr><strong>Hispanic/Latino Householders: </strong>${w}%`).addTo(map)}else{const o=map.queryRenderedFeatures(e.point,{})[0].properties,s=o.NAMELSAD,a=o.VoterTurn;var t;n=e.lngLat.lat,r=e.lngLat.lng;(t=[]).push(r,n),popup.setLngLat(t).setHTML(`<h6><strong>County: ${s}</strong></h6><hr style="height:2px;border-width:0;color:gray;background-color:gray"><strong>Voter Turnout: </strong>${a}%\n        </p>`).addTo(map)}}));